<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes" />
    <meta name="description" content="Тарифы Альбатрос - прозрачные цены на ОСАГО, КАСКО, ДМС, страхование жизни и имущества. Гибкие условия, индивидуальные расчеты, лучшие предложения." />
    <meta name="keywords" content="тарифы, цены на страховку, ОСАГО тариф, КАСКО тариф, ДМС, страховые предложения, калькулятор, расчет страховки, сравнить" />
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large" />
    <meta name="language" content="Russian" />
    <link rel="canonical" href="https://albatros-insurance.ru/tariffs" />
    <meta property="og:title" content="Тарифы Альбатрос" />
    <meta property="og:description" content="Выберите оптимальный тариф страхования с прозрачными ценами" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://albatros-insurance.ru/tariffs" />
    <meta name="twitter:card" content="summary" />
    <title>Тарифы Страхования | Альбатрос - ОСАГО, КАСКО, ДМС</title>
    <link rel="stylesheet" href="albatros-reg.css" />
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo-nav">
                <a href="albatros-main.html"><img src="images/logo.png" alt="Логотип Альбатрос" class="logo" /></a>
                <nav>
                    <ul>
                        <li><a href="albatros-main.html">Главная</a></li>
                        <li><a href="albatros-about.html">О Компании</a></li>
                        <li><a href="albatros-tariffs.html">Тарифы</a></li>
                        <li><a href="albatros-construct.html">Конструктор тарифов</a></li>
                    </ul>
                </nav>
            </div>
            <div class="header-buttons">
                <button id="admin-btn" class="header-button" style="display:none;">Админпанель</button>
                <button id="auth-button" class="auth-button header-button">Вход / Регистрация</button>
            </div>
        </div>
    </header>

    <main>
        <section class="tariffs">
            <div class="container">
                <h2>Наши Тарифы</h2>
                <div class="tariff-cards" id="tariff-cards">
                    <!-- Тарифы из Firebase будут загружены сюда -->
                </div>
                <div class="construct-cta" style="margin-top:20px; text-align:center;">
                    <a href="albatros-construct.html" class="header-button" style="text-decoration:none;">Создайте свой тариф</a>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="header-container">
            <h2>Свяжитесь с нами</h2>
            <p>Телефон: +7 (123) 456-78-90</p>
            <p>Email: info@albatros-insurance.ru</p>
            <p>Адрес: г. Москва, ул. Примерная, д. 1</p>
        </div>
    </footer>

    <script src="authorisation.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script>
        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBrs6S82ksKPiPxlF4T1hyartpIS3A9UNc",
            authDomain: "web-swimeasy.firebaseapp.com",
            databaseURL: "https://web-albatros-strah-default-rtdb.firebaseio.com",
            projectId: "web-swimeasy",
            storageBucket: "web-swimeasy.firebasestorage.app",
            messagingSenderId: "952061702288",
            appId: "1:952061702288:web:1dec35903e94b4a4a7e815",
            measurementId: "G-8DXRCL2S8B"
        };

        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const database = firebase.database();

        // Handle header UI based on auth state
        document.addEventListener('DOMContentLoaded', () => {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const adminBtn = document.getElementById('admin-btn');
            const authButton = document.getElementById('auth-button');

            if (currentUser) {
                // User is authenticated
                if (currentUser.isAdmin && adminBtn) {
                    adminBtn.style.display = 'inline-block';
                    adminBtn.addEventListener('click', () => {
                        window.location.href = 'adminpanel.html';
                    });
                }

                // Fetch and display user name
                const userRef = database.ref(`Clients/ID/${currentUser.clientId}`);
                userRef.once('value').then(snapshot => {
                    const userData = snapshot.val();
                    if (userData && userData.information) {
                        const surname = userData.information.Surname || '';
                        const name = userData.information.Name || '';
                        const displayName = surname + ' ' + (name ? name.charAt(0) + '.' : '');
                        authButton.textContent = displayName;
                        authButton.onclick = () => window.location.href = 'albatros-user.html';
                    }
                }).catch(error => {
                    console.error('Ошибка загрузки данных пользователя:', error);
                });
            } else if (authButton) {
                authButton.onclick = () => window.location.href = 'albatros-reg.html';
            }
        });

        // Load tariffs from Firebase
        async function loadTariffs() {
            const tariffsContainer = document.getElementById('tariff-cards');
            try {
                const snapshot = await database.ref('Tariphs/ID').once('value');
                if (snapshot.exists()) {
                    const tariffsData = snapshot.val();
                    tariffsContainer.innerHTML = '';
                    for (const key in tariffsData) {
                        if (tariffsData.hasOwnProperty(key)) {
                            const tariff = tariffsData[key];
                            const card = document.createElement('div');
                            card.className = 'card';
                            card.innerHTML = `
                                <h3>${tariff.displayName || tariff.name}</h3>
                                <p>Описание: ${tariff.description || 'Описание отсутствует'}</p>
                                <p><strong>Цена: ${tariff.price} руб/год</strong></p>
                            `;
                            tariffsContainer.appendChild(card);
                        }
                    }
                } else {
                    tariffsContainer.innerHTML = '<p>Тарифы не найдены.</p>';
                }
            } catch (error) {
                tariffsContainer.innerHTML = '<p>Ошибка загрузки тарифов.</p>';
                console.error(error);
            }
        }

        document.addEventListener('DOMContentLoaded', loadTariffs);
    </script>
</body>
</html>
